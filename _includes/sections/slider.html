{% comment %}
Title: Image Slider Section
Description: Creates an endless horizontal marquee of images with headlines. Uses CSS animations for smooth scrolling effect.
Page Usages: Home page slider section and other pages requiring image showcases
Parameters:
- section_data: Data from textblocks.yml under sections.slider
  - headline: Main section title displayed below the slider
- site.data.textblocks.sections.slider.slides: Array of slide objects
  - slide.headline: Text headline for each slide
  - slide.image: Image path for each slide
{% endcomment %}

{% assign page_key = page.key | default: page.url | replace:'/','' | default: 'index' %}
{% assign section = 'slider' %}

{% assign section_data = site.data.textblocks.pages[page_key].sections[section] | default:
site.data.textblocks.sections[section] %}

<style>
    .marquee-track {
        animation: marquee 30s linear infinite;
    }

    @keyframes marquee {
        0% {
            transform: translateX(0);
        }

        100% {
            transform: translateX(-50%);
        }
    }
</style>

<div class="flex flex-col pb-10 md:pb-24 pt-10 md:pt-24">
    <div class="overflow-hidden w-full relative mt-10 md:mt-0">
        <div class="marquee-track flex w-max gap-4">
            {% for slide in site.data.textblocks.sections.slider.slides %}
            <div class="flex flex-col-reverse md:flex-col items-center w-[80vw] md:w-80">
                <h3 class="text-3xl font-medium mt-4 md:mt-0 mb-4 text-center">{{ slide.headline }}</h3>
                <img
                    srcset="{{ slide.image | relative_url }}-400w.webp 400w, {{ slide.image | relative_url }}-600w.webp 600w, {{ slide.image | relative_url }}-800w.webp 800w, {{ slide.image | relative_url }}-1000w.webp 1000w, {{ slide.image | relative_url }}-1200w.webp 1200w"
                    sizes="(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (min-width: 1001px) 1200px"
                    src="{{ slide.image | relative_url }}.webp"
                    width="1600"
                    height="1672"
                    loading="lazy"
                    alt="{{ slide.headline }}" class="w-full h-auto object-contain"
                    />
            </div>
            {% endfor %}
            {% for slide in site.data.textblocks.sections.slider.slides %}
            <div class="flex flex-col-reverse md:flex-col items-center w-[80vw] md:w-80">
                <h3 class="text-3xl font-medium mt-4 md:mt-0 mb-4 text-center">{{ slide.headline }}</h3>
                <img
                srcset="{{ slide.image | relative_url }}-400w.webp 400w, {{ slide.image | relative_url }}-600w.webp 600w, {{ slide.image | relative_url }}-800w.webp 800w, {{ slide.image | relative_url }}-1000w.webp 1000w, {{ slide.image | relative_url }}-1200w.webp 1200w"
                sizes="(max-width: 400px) 400px, (max-width: 600px) 600px, (max-width: 800px) 800px, (max-width: 1000px) 1000px, (min-width: 1001px) 1200px"
                src="{{ slide.image | relative_url }}.webp"
                width="1600"
                height="1672"
                loading="lazy"
                alt="{{ slide.headline }}" class="w-full h-auto object-contain"
                />
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="px-8 md:px-4">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mt-12 md:mt-24">
                <h2 class="text-4xl font-medium md:font-bold font-display mb-4 is-animated">{{ section_data.headline }}</h2>
            </div>
        </div>
    </div>
</div>
